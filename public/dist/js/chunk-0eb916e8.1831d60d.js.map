{"version":3,"sources":["webpack:///./src/views/os/file/Index.vue","webpack:///./src/views/os/file/Index.vue?d9d2","webpack:///./src/views/os/file/Index.vue?245e"],"names":["id","_createElementVNode","class","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_a_space","_component_a_button","onClick","_cache","$event","$options","messageShow","messageShowConfirm","_hoisted_4","_hoisted_5","_component_a_row","_component_a_col","span","_component_a_input","$data","dir_path","value","addon-before","selectDir","_hoisted_6","_hoisted_7","_component_a_list","grid","gutter","column","data-source","file_list","_component_a_list_item","slot","slot-scope","openDirectry","_ctx","item","_component_a_card","title","content","type","_hoisted_8","_hoisted_9","_component_a_upload_dragger","name","multiple","action","action_url","onChange","handleFileChange","_hoisted_10","_component_a_icon","_hoisted_11","_hoisted_12","_hoisted_13","fileList","data","image_info","num","servicAddress","mounted","this","getHost","methods","$ipc","invoke","ipcApiRoute","checkHttpServer","then","r","enable","server","storage","set","host","uri","uploadFile","url","split","join","openDirectory","res","selectFolder","$message","info","console","log","error","status","file","uploadRes","response","code","picInfo","imageUrlText","push","success","__exports__","render"],"mappings":"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","file":"js/chunk-0eb916e8.1831d60d.js","sourcesContent":["<template>\r\n  <div id=\"app-base-file\">\r\n    <div class=\"one-block-1\">\r\n      <span>\r\n        1. 系统原生对话框\r\n      </span>\r\n    </div>  \r\n    <div class=\"one-block-2\">\r\n      <a-space>\r\n        <a-button @click=\"messageShow()\">消息提示(ipc)</a-button>\r\n        <a-button @click=\"messageShowConfirm()\">消息提示与确认(ipc)</a-button>\r\n      </a-space>\r\n    </div>\r\n    <div class=\"one-block-1\">\r\n      <span>\r\n        2. 选择保存目录\r\n      </span>\r\n    </div>  \r\n    <div class=\"one-block-2\">\r\n      <a-row>\r\n        <a-col :span=\"12\">\r\n          <a-input v-model=\"dir_path\" :value=\"dir_path\" addon-before=\"保存目录\" />\r\n        </a-col>\r\n        <a-col :span=\"12\">\r\n          <a-button @click=\"selectDir\">\r\n            修改目录\r\n          </a-button>\r\n        </a-col>\r\n      </a-row>\r\n    </div>      \r\n    <div class=\"one-block-1\">\r\n      <span>\r\n        3. 打开文件夹\r\n      </span>\r\n    </div>  \r\n    <div class=\"one-block-2\">\r\n      <a-list :grid=\"{ gutter: 16, column: 4 }\" :data-source=\"file_list\">\r\n        <a-list-item slot=\"renderItem\" slot-scope=\"item\" @click=\"openDirectry(item.id)\">\r\n          <a-card :title=\"item.content\">\r\n            <a-button type=\"link\">\r\n              打开\r\n            </a-button>\r\n          </a-card>\r\n        </a-list-item>\r\n      </a-list>\r\n    </div>\r\n    <div class=\"one-block-1\">\r\n      <span>\r\n        4. 上传文件到图床\r\n      </span>\r\n    </div>  \r\n    <div class=\"one-block-2\">\r\n      <a-upload-dragger\r\n        name=\"file\"\r\n        :multiple=\"true\"\r\n        :action=\"action_url\"\r\n        @change=\"handleFileChange\"\r\n      >\r\n        <p class=\"ant-upload-drag-icon\">\r\n          <a-icon type=\"inbox\" />\r\n        </p>\r\n        <p class=\"ant-upload-text\">\r\n          点击 或 拖拽文件到这里\r\n        </p>\r\n        <p class=\"ant-upload-hint\">\r\n          注意：请使用您自己的图床token\r\n        </p>\r\n      </a-upload-dragger>\r\n    </div>\r\n    <div class=\"footer\">\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport storage from 'store2'\r\nimport { ipcApiRoute } from '@/api/main'\r\n\r\nconst fileList = [\r\n  {\r\n    content: '【下载】目录',\r\n    id: 'downloads'\r\n  },\r\n  {\r\n    content: '【图片】目录',\r\n    id: 'pictures'\r\n  },\r\n  {\r\n    content: '【文档】目录',\r\n    id: 'documents'\r\n  },\r\n  {\r\n    content: '【音乐】目录',\r\n    id: 'music'\r\n  }\r\n];\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      file_list: fileList,\r\n      action_url: '',\r\n      image_info: [],\r\n      num: 0,\r\n      servicAddress: '',\r\n\t\t\tdir_path: \"D:\\\\www\\\\ee\",\r\n    };\r\n  },\r\n  mounted () {\r\n    this.getHost();\r\n  },\r\n  methods: {\r\n    getHost () {\r\n      this.$ipc.invoke(ipcApiRoute.checkHttpServer, {}).then(r => {\r\n        if (r.enable) {\r\n          this.servicAddress = r.server;\r\n          storage.set('httpServiceConfig', r);\r\n\r\n          // url转换\r\n          const host = r.server || 'http://localhost:7071';\r\n          let uri = ipcApiRoute.uploadFile;\r\n          let url = uri.split('.').join('/');\r\n          this.action_url = host + '/' + url;\r\n        }\r\n      })\r\n    },\r\n    openDirectry (id) {\r\n      this.$ipc.invoke(ipcApiRoute.openDirectory, {id: id}).then(res => {\r\n        //console.log('res:', res)\r\n      })      \r\n    },\r\n    selectDir() {\r\n      this.$ipc.invoke(ipcApiRoute.selectFolder, '').then(r => {\r\n        this.dir_path = r;\r\n        this.$message.info(r);\r\n      })      \r\n    },\r\n\t\tmessageShow() {\r\n      this.$ipc.invoke(ipcApiRoute.messageShow, '').then(r => {\r\n        this.$message.info(r);\r\n      })\r\n    },    \r\n    messageShowConfirm() {\r\n      this.$ipc.invoke(ipcApiRoute.messageShowConfirm, '').then(r => {\r\n        this.$message.info(r);\r\n      })\r\n    },\r\n    handleFileChange(info) {\r\n      console.log('handleFileChange-----');\r\n      if (this.action_url == '') {\r\n        this.$message.error('http服务未开启');\r\n        return;\r\n      }\r\n      const status = info.file.status;\r\n      if (status !== 'uploading') {\r\n        console.log(info.file);\r\n      }\r\n      if (status === 'done') {\r\n        const uploadRes = info.file.response;\r\n        console.log('uploadRes:', uploadRes)\r\n        if (uploadRes.code !== 'success') {\r\n          this.$message.error(`file upload failed ${uploadRes.code} .`);\r\n          return false;\r\n        }\r\n        this.num++;\r\n        const picInfo = uploadRes.data;\r\n        picInfo.id = this.num;\r\n        picInfo.imageUrlText = 'image url';\r\n        this.image_info.push(picInfo);\r\n        this.$message.success(`${info.file.name} file uploaded successfully.`);\r\n      } else if (status === 'error') {\r\n        this.$message.error(`${info.file.name} file upload failed.`);\r\n      }\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n#app-base-file {\r\n  padding: 0px 10px;\r\n  text-align: left;\r\n  width: 100%;\r\n  .one-block-1 {\r\n    font-size: 16px;\r\n    padding-top: 10px;\r\n  }\r\n  .one-block-2 {\r\n    padding-top: 10px;\r\n  }\r\n  .footer {\r\n    padding-top: 10px;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Index.vue?vue&type=template&id=6d05cf8f&scoped=true\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=6d05cf8f&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\Work\\\\projects\\\\electron-egg-demo\\\\frontend\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6d05cf8f\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Index.vue?vue&type=style&index=0&id=6d05cf8f&lang=less&scoped=true\""],"sourceRoot":""}